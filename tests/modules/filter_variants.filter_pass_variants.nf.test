nextflow_process {

    name "Test Process FILTER_PASS_VARIANTS"
    script "modules/filter_variants.nf"
    process "FILTER_PASS_VARIANTS"

    test("Should run without failures") {

        when {
        params {
            load("$baseDir/tests/testdata/test_params.json")
        }
            process {
                """
                input[0] = tuple([sample_id: "PD54555a", caller: "caveman"], 
                                 file("/lustre/scratch124/jb63/mafqc/caveman_files/PD54555a/PD54555a.smartphase.vep.vcf.gz"))
                input[1] = file("${params.baitset}")
                """
            }
        }

        then {
            assert process.success
            assert snapshot(process.out).match()
        }

    }

}
